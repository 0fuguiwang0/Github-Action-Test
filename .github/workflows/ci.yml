name: PR Build & Deploy

on:
  pull_request:

jobs:
  build:
    runs-on: ubuntu-latest
    outputs:
      image_tag: ${{ steps.build_image.outputs.image_tag }}
    steps:
      - name: Set Image Tag
        id: build_image
        run: |
          echo "image_tag=my-registry.com/myapp:dev" >> $GITHUB_OUTPUT

  test:
    needs: build
    runs-on: ubuntu-latest
    steps:
      - name: Show Output
        run: echo "Image is: ${{ needs.build.outputs.image_tag }}"
